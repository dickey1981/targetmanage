# 语音识别开发模式配置

## 🔧 问题说明

微信开发者工具的录音文件格式与真实移动端不同，导致腾讯云ASR无法识别。为解决开发测试问题，提供了模拟语音识别功能。

## 🚀 启用开发模式

### 1. 设置环境变量

在 `backend/.env` 文件中添加：

```bash
# 开发模式配置
ASR_DEV_MODE=true
```

### 2. 重启后端服务

```bash
cd backend
python start_dev.py
```

## 🎭 模拟识别功能

开发模式下，系统会：

1. **跳过真实ASR调用**：避免格式兼容性问题
2. **返回预设测试文本**：从以下内容中随机选择：
   - "我要在3个月内减重10斤"
   - "半年内学会游泳"
   - "这个季度要完成5个项目"
   - "下个月开始学习Python编程"
   - "每天跑步30分钟"
   - "每周读一本书"
   - "提高工作效率"
   - "学习英语口语"

3. **模拟识别延迟**：500ms延迟，模拟真实识别过程
4. **记录详细日志**：显示模拟识别结果和文件信息

## 📱 测试流程

1. 在微信开发者工具中按住语音按钮录音
2. 说出任意内容（实际会被忽略）
3. 系统返回随机测试文本
4. 验证语音解析和目标创建流程

## 🔄 生产环境

部署到生产环境时：

1. 设置 `ASR_DEV_MODE=false` 或删除该配置
2. 确保腾讯云ASR服务已正确配置
3. 在真实移动端测试语音识别功能

## 📊 日志示例

开发模式下的日志输出：

```
🔧 开发模式：使用模拟语音识别
🎭 模拟识别结果: 我要在3个月内减重10斤 (文件大小: 19060字节, 格式: mp3)
✅ 语音识别成功: 我要在3个月内减重10斤
```

## ⚠️ 注意事项

- 开发模式仅用于功能测试，不适用于生产环境
- 模拟文本是固定的，无法识别用户真实语音内容
- 建议在真实移动端验证完整的语音识别流程
