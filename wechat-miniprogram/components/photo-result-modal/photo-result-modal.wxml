<!-- components/photo-result-modal/photo-result-modal.wxml -->
<view class="photo-result-modal {{show ? 'show' : ''}}" wx:if="{{show}}">
  <view class="modal-mask" bindtap="close"></view>
  <view class="modal-container">
    <view class="modal-header">
      <text class="modal-title">ğŸ“¸ ç…§ç‰‡è¯†åˆ«æˆåŠŸ</text>
      <view class="close-btn" bindtap="close">âœ•</view>
    </view>

    <view class="modal-body" wx:if="{{photoData}}">
      <!-- è¯†åˆ«å†…å®¹ -->
      <view class="result-section">
        <view class="section-title">è¯†åˆ«å†…å®¹</view>
        <view class="content-text">{{photoData.record.content}}</view>
      </view>

      <!-- åˆ†æç»“æœ -->
      <view class="result-section">
        <view class="section-title">æ™ºèƒ½åˆ†æ</view>
        <view class="analysis-grid">
          <view class="analysis-item">
            <text class="item-label">è®°å½•ç±»å‹</text>
            <text class="item-value">{{getRecordTypeText(photoData.analysis.record_type)}}</text>
          </view>
          <view class="analysis-item">
            <text class="item-label">æƒ…ç»ª</text>
            <text class="item-value">{{getSentimentText(photoData.analysis.sentiment)}}</text>
          </view>
          <view class="analysis-item">
            <text class="item-label">èƒ½é‡ç­‰çº§</text>
            <text class="item-value">{{photoData.analysis.energy_level}}</text>
          </view>
          <view class="analysis-item">
            <text class="item-label">ç½®ä¿¡åº¦</text>
            <text class="item-value">{{photoData.analysis.confidence_score}}%</text>
          </view>
        </view>
      </view>

      <!-- å…³é”®è¯ -->
      <view class="result-section" wx:if="{{photoData.analysis.keywords && photoData.analysis.keywords.length > 0}}">
        <view class="section-title">å…³é”®è¯</view>
        <view class="keywords">
          <view class="keyword-tag" wx:for="{{photoData.analysis.keywords}}" wx:key="index">
            {{item}}
          </view>
        </view>
      </view>

      <!-- ç‰¹æ®Šæ ‡è®° -->
      <view class="result-section" wx:if="{{photoData.analysis.is_important || photoData.analysis.is_milestone || photoData.analysis.is_breakthrough}}">
        <view class="section-title">ç‰¹æ®Šæ ‡è®°</view>
        <view class="tags">
          <view class="tag important" wx:if="{{photoData.analysis.is_important}}">
            â­ é‡è¦
          </view>
          <view class="tag milestone" wx:if="{{photoData.analysis.is_milestone}}">
            ğŸ¯ é‡Œç¨‹ç¢‘
          </view>
          <view class="tag breakthrough" wx:if="{{photoData.analysis.is_breakthrough}}">
            ğŸš€ çªç ´
          </view>
        </view>
      </view>
    </view>

    <view class="modal-footer">
      <button class="btn btn-secondary" bindtap="close">å…³é—­</button>
      <button class="btn btn-primary" bindtap="confirm">ç¡®å®š</button>
    </view>
  </view>
</view>

