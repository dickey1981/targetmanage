<!-- ç›®æ ‡ç®¡ç†é¡µé¢ -->
<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="header">
    <text class="page-title">ç›®æ ‡ç®¡ç†</text>
    <view class="header-actions">
      <view class="create-btn" bindtap="showCreateModal">
        <text class="create-icon">â•</text>
      </view>
    </view>
  </view>

  <!-- ç›®æ ‡ç»Ÿè®¡æ¦‚è§ˆ -->
  <view class="goals-overview">
    <view class="overview-item">
      <text class="overview-number">{{totalGoals}}</text>
      <text class="overview-label">æ€»ç›®æ ‡</text>
    </view>
    <view class="overview-item">
      <text class="overview-number">{{activeGoals}}</text>
      <text class="overview-label">è¿›è¡Œä¸­</text>
    </view>
    <view class="overview-item">
      <text class="overview-number">{{completedGoals}}</text>
      <text class="overview-label">å·²å®Œæˆ</text>
    </view>
    <view class="overview-item">
      <text class="overview-number">{{completionRate}}%</text>
      <text class="overview-label">å®Œæˆç‡</text>
    </view>
  </view>

  <!-- ç›®æ ‡åˆ—è¡¨ -->
  <view class="goals-list">
    <view class="list-header">
      <text class="list-title">æˆ‘çš„ç›®æ ‡</text>
    </view>

    <!-- ç›®æ ‡å¡ç‰‡åˆ—è¡¨ -->
    <view class="goal-cards" wx:if="{{goals.length > 0}}">
      <view class="goal-card" wx:for="{{goals}}" wx:key="id" bindtap="onGoalTap" data-id="{{item.id}}">
        <view class="goal-header">
          <text class="goal-category">{{item.categoryText}}</text>
          <text class="goal-status">{{item.statusText}}</text>
        </view>
        <text class="goal-title">{{item.title}}</text>
        <view class="goal-progress">
          <view class="progress-info">
            <text class="progress-text">è¿›åº¦</text>
            <text class="progress-detail">{{item.progress}}%</text>
          </view>
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{item.progressPercent}}%"></view>
          </view>
        </view>
        <view class="goal-footer">
          <text class="deadline">æˆªæ­¢: {{item.endDateText}}</text>
          <text class="days-left">å‰©ä½™{{item.daysLeft}}å¤©</text>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:else>
      <text class="empty-icon">ğŸ¯</text>
      <text class="empty-title">è¿˜æ²¡æœ‰ç›®æ ‡</text>
      <text class="empty-subtitle">åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªç›®æ ‡ï¼Œå¼€å§‹å®ç°æ¢¦æƒ³</text>
      <button class="create-first-btn" bindtap="showCreateModal">åˆ›å»ºç›®æ ‡</button>
    </view>
  </view>
</view>

<!-- åˆ›å»ºç›®æ ‡å¼¹çª— -->
<view class="create-modal" wx:if="{{showCreateModal}}">
  <view class="modal-content">
    <view class="modal-header">
      <text class="modal-title">è¯­éŸ³åˆ›å»ºç›®æ ‡</text>
      <view class="close-btn" bindtap="hideCreateModal">âœ•</view>
    </view>

    <!-- è¯­éŸ³åˆ›å»ºåŒºåŸŸ -->
    <view class="voice-section">
      <view class="{{voiceButtonClass}}"
            bindtouchstart="startVoiceRecord"
            bindtouchend="stopVoiceRecord">
        <view class="voice-icon">ğŸ¤</view>
        <text class="main-text">{{recordingText}}</text>
        <text class="sub-text">{{voiceHint}}</text>
      </view>
    </view>

    <!-- è¯­éŸ³æç¤º -->
    <view class="voice-tip">
      <text class="tip-text">æŒ‰ä½è¯´è¯ï¼Œæ¾å¼€ç»“æŸå½•éŸ³</text>
      <text class="tip-text">å½•éŸ³å®Œæˆåå°†è‡ªåŠ¨è·³è½¬åˆ°åˆ›å»ºé¡µé¢</text>
    </view>
  </view>
</view>
