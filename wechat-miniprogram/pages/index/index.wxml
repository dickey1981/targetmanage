<!-- é¦–é¡µ - æ™ºèƒ½äº¤äº’ä¸­å¿ƒ -->
<view class="container">
  <!-- é¡¶éƒ¨åŒºåŸŸ (20%å±å¹•é«˜åº¦) -->
  <view class="header-section">
    <!-- ç”¨æˆ·é—®å€™å’Œä»Šæ—¥æ¦‚è§ˆ -->
    <view class="user-greeting">
      <view class="greeting-text">
        <text class="greeting">{{greetingText}}</text>
        <text class="username">{{userInfo.nickname || 'ç”¨æˆ·'}}</text>
      </view>
      <view class="today-overview">
        <text class="overview-item">ä»Šæ—¥ç›®æ ‡: {{todayGoals.length}}ä¸ª</text>
        <text class="overview-item">å·²å®Œæˆ: {{completedGoalsCount}}ä¸ª</text>
        <text class="overview-item">å¾…å®Œæˆ: {{pendingGoalsCount}}ä¸ª</text>
      </view>
    </view>
  </view>

  <!-- æ ¸å¿ƒäº¤äº’åŒº - è¯­éŸ³æŒ‰é’® (50%å±å¹•é«˜åº¦) -->
  <view class="voice-interaction-section">
    <view class="voice-button-container">
      <view class="voice-button {{isRecording ? 'recording' : ''}}" 
            bindtouchstart="startVoiceRecord" 
            bindtouchend="stopVoiceRecord">
        <view class="voice-icon">
          <text class="icon">ğŸ¤</text>
        </view>
        <view class="voice-text">
          <text class="main-text">{{recordingText}}</text>
          <text class="sub-text">{{voiceHint}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œåŒº (15%å±å¹•é«˜åº¦) -->
  <view class="quick-actions-section">
    <view class="quick-actions">
      <view class="action-item" bindtap="takePhoto">
        <view class="action-icon photo-icon">ğŸ“·</view>
        <text class="action-text">æ‹ç…§è®°å½•</text>
      </view>
      <view class="action-item" bindtap="createGoal">
        <view class="action-icon create-icon">â•</view>
        <text class="action-text">åˆ›å»ºç›®æ ‡</text>
      </view>
      <view class="action-item" bindtap="syncData">
        <view class="action-icon sync-icon">ğŸ”„</view>
        <text class="action-text">æ•°æ®åŒæ­¥</text>
      </view>
    </view>
  </view>

  <!-- ä»Šæ—¥ç›®æ ‡åŒº (15%å±å¹•é«˜åº¦) -->
  <view class="today-goals-section">
    <view class="section-header">
      <text class="section-title">ä»Šæ—¥ç›®æ ‡</text>
      <text class="section-more" bindtap="viewAllGoals">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    
    <view class="goals-container">
      <block wx:if="{{todayGoals.length > 0}}">
        <view class="goal-card" 
              wx:for="{{todayGoals}}" 
              wx:key="id"
              bindtap="goToGoalDetail"
              data-goal-id="{{item.id}}">
          <view class="goal-header">
            <view class="goal-category {{item.category === 'å·¥ä½œ' ? 'work' : item.category === 'å­¦ä¹ ' ? 'study' : item.category === 'å¥åº·' ? 'health' : item.category === 'ç”Ÿæ´»' ? 'life' : ''}}">{{item.category}}</view>
            <view class="goal-status {{item.completed ? 'completed' : 'in-progress'}}">
              {{item.completed ? 'å·²å®Œæˆ' : 'è¿›è¡Œä¸­'}}
            </view>
          </view>
          <view class="goal-title">{{item.title}}</view>
          <view class="goal-progress">
            <view class="progress-bar">
              <view class="progress-fill" style="width: {{item.progress}}%"></view>
            </view>
            <text class="progress-text">{{item.progress}}%</text>
          </view>
        </view>
      </block>
      
      <view wx:else class="empty-goals">
        <text class="empty-text">æš‚æ— ä»Šæ—¥ç›®æ ‡</text>
        <text class="empty-hint">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªç›®æ ‡</text>
      </view>
    </view>
  </view>

  <!-- ç™»å½•å¼¹çª— -->
  <view class="login-modal" wx:if="{{showLoginModal}}">
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-title">å¿«é€Ÿç™»å½•</text>
        <text class="modal-subtitle">æˆæƒåå³å¯ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½</text>
      </view>
      
      <view class="auth-section">
        <button class="auth-btn wechat-auth" 
                open-type="getUserInfo" 
                bindgetuserinfo="onGetUserInfo">
          <text class="btn-text">å¾®ä¿¡æˆæƒç™»å½•</text>
        </button>
      </view>
      
      <view class="legal-text">
        <text>æˆæƒå³è¡¨ç¤ºåŒæ„</text>
        <text class="link">ç”¨æˆ·åè®®</text>
        <text>å’Œ</text>
        <text class="link">éšç§æ”¿ç­–</text>
      </view>
    </view>
  </view>
</view>
